<odoo>
    <!-- Form view for CRM Stage to add color picker -->
    <record id="view_crm_stage_form" model="ir.ui.view">
    <field name="name">crm.stage.form</field>
    <field name="model">crm.stage</field>
    <!-- Update the inherit_id reference to use the correct view -->
    <field name="inherit_id" ref="crm.lead.kanban.lead"/>
    <field name="arch" type="xml">
        <xpath expr="//group[@name='kanban_group']" position="inside">
            <field name="kanban_color" widget="color"/>
        </xpath>
    </field>
</record>

    <!-- Add a menu item under CRM Configuration -->
    <menuitem id="menu_crm_stage_colors"
              name="Stage Colors"
              parent="crm.crm_menu_config"
              action="action_crm_stage_color_form"/>

    <!-- Action to open the form view for configuring colors -->
    <record id="action_crm_stage_color_form" model="ir.actions.act_window">
        <field name="name">Configure Kanban Colors</field>
        <field name="res_model">crm.stage</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="crm.view_crm_case_stage_tree"/>
        <field name="help" type="html">
            <p>
                Set custom colors for your Kanban cards based on the CRM stages.
            </p>
        </field>
    </record>
</odoo>